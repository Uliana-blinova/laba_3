{% extends 'base.html' %}

{% block content %}
<h1>–ì–ª–∞–≤–Ω–∞—è</h1>

{% if user.is_authenticated %}
  {% for post in page_obj %}
<div class="cards">
     <article class="post-card">
      <div class="post-header">
        <span class="post-author">{{ post.author.username }}</span>
        <time>{{ post.created_at|date:"d.m.Y H:i" }}</time>
      </div>
      <a href="{% url 'post_detail' post.id %}" class="post-content">
        {{ post.content|linebreaks }}
      </a>
      <div class="post-actions">
        <form method="post" action="{% url 'like_post' post.id %}">
          {% csrf_token %}
          <button type="submit" class="like-btn {% if post.liked %}liked{% endif %}">
            {% if post.liked %}‚ù§Ô∏è{% else %}üíô{% endif %}
          </button>
        </form>
        <a href="{% url 'post_detail' post.id %}#comments" class="comment-link">üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</a>
      </div>
      <div class="post-stats">
        <span>‚ù§Ô∏è {{ post.likes_count }}</span>
        <span>üí¨ {{ post.comments_count }}</span>
      </div>
    </article>
</div>

  {% empty %}
    <p>–ü–æ–∫–∞ –Ω–∏–∫—Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–ø–∏—Å–∞–ª.</p>
  {% endfor %}

  {% if page_obj and page_obj.paginator.num_pages > 1 %}
    <nav class="pagination">
      {% if page_obj.has_previous %}
        <a href="?page=1">&laquo;</a>
        <a href="?page={{ page_obj.previous_page_number }}">‚Äπ</a>
      {% endif %}

      <span class="active">{{ page_obj.number }}</span>

      {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}">‚Ä∫</a>
        <a href="?page={{ page_obj.paginator.num_pages }}">&raquo;</a>
      {% endif %}
    </nav>
  {% endif %}
{% else %}
  <p class="post-content">
    <a href="{% url 'login' %}">–í–æ–π–¥–∏—Ç–µ</a> –∏–ª–∏ <a href="{% url 'register' %}">–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</a>, —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å –ø–æ—Å—Ç—ã –∏ —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –æ–±—Å—É–∂–¥–µ–Ω–∏—è—Ö.
  </p>
{% endif %}
{% endblock %}