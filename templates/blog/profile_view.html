<!-- templates/blog/profile_view.html -->
{% extends 'base.html' %}

{% block content %}
<h2>–ü—Ä–æ—Ñ–∏–ª—å: {{ profile_user.username }}</h2>

<!-- –ê–≤–∞—Ç–∞—Ä -->
<div>
    {% if profile_user.profile.avatar %}
        <img src="{{ profile_user.profile.avatar.url }}" alt="–ê–≤–∞—Ç–∞—Ä" width="100" style="border-radius: 50%;">
    {% else %}
        <div style="width:100px; height:100px; background:#eee; border-radius:50%; display:flex; align-items:center; justify-content:center;">
            ?
        </div>
    {% endif %}
</div>

<!-- –ë–∏–æ -->
<p><em>{{ profile_user.profile.bio|default:"–ë–∏–æ–≥—Ä–∞—Ñ–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç" }}</em></p>

<!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (—Ç–æ–ª—å–∫–æ —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å) -->
{% if user.is_authenticated and user.id == profile_user.id %}
    <p>
        <a href="{% url 'profile_edit' %}">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</a> |
        <a href="{% url 'profile_delete' %}" style="color: #dc3545;">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</a>
    </p>
{% endif %}

<!-- –ü–æ—Å—Ç—ã -->
<h3>–ü–æ—Å—Ç—ã ({{ page_obj.paginator.count }}):</h3>
{% for post in page_obj %}
    <div style="border-bottom: 1px solid #eee; padding: 10px 0;">
        <p>{{ post.content|truncatewords:20 }}</p>
        <small>{{ post.created_at|date:"d.m.Y H:i" }} | ‚ù§Ô∏è {{ post.likes_count }} | üí¨ {{ post.comments_count }}</small>
    </div>
{% empty %}
    <p>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –µ—â—ë –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–ø–∏—Å–∞–ª.</p>
{% endfor %}

<!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
<div style="margin-top: 15px;">
    {% if page_obj.has_previous %}
        <a href="?page=1">&laquo; –ø–µ—Ä–≤–∞—è</a>
        <a href="?page={{ page_obj.previous_page_number }}">–Ω–∞–∑–∞–¥</a>
    {% endif %}

    –°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ page_obj.number }} –∏–∑ {{ page_obj.paginator.num_pages }}

    {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}">–≤–ø–µ—Ä—ë–¥</a>
        <a href="?page={{ page_obj.paginator.num_pages }}">–ø–æ—Å–ª–µ–¥–Ω—è—è &raquo;</a>
    {% endif %}
</div>

<a href="{% url 'home' %}">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
{% endblock %}