{% extends 'base.html' %}

{% block content %}
<div class="profile-header">
  <div class="avatar-wrapper">
    {% if profile_user.profile.avatar %}
      <img src="{{ profile_user.profile.avatar.url }}" alt="–ê–≤–∞—Ç–∞—Ä">
    {% else %}
      ?
    {% endif %}
  </div>
  <h1 class="profile-username">{{ profile_user.username }}</h1>
  <p class="profile-bio">
    {{ profile_user.profile.bio|default:"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–∫–∞ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–ø–∏—Å–∞–ª –æ —Å–µ–±–µ." }}
  </p>

  {% if user.is_authenticated and user.id == profile_user.id %}
    <p>
      <a href="{% url 'profile_edit' %}" class="btn btn-secondary">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</a>
      <a href="{% url 'profile_delete' %}" class="btn btn-danger" style="margin-left: 8px;">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</a>
    </p>
  {% endif %}
</div>

<h2>–ü–æ—Å—Ç—ã ({{ page_obj.paginator.count }})</h2>

{% for post in page_obj %}
  <article class="post-card">
    <div class="post-header">
      <time>{{ post.created_at|date:"d.m.Y H:i" }}</time>
    </div>
    <div class="post-content">{{ post.content|truncatewords:40 }}</div>
    <div class="post-stats">
      <span>‚ù§Ô∏è {{ post.likes_count }}</span>
      <span>üí¨ {{ post.comments_count }}</span>
    </div>
  </article>
{% empty %}
  <p>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –µ—â—ë –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–ø–∏—Å–∞–ª.</p>
{% endfor %}

{% if page_obj.paginator.num_pages > 1 %}
  <nav class="pagination">
    {% if page_obj.has_previous %}
      <a href="?page=1">&laquo;</a>
      <a href="?page={{ page_obj.previous_page_number }}">‚Äπ</a>
    {% endif %}

    <span class="active">{{ page_obj.number }}</span>

    {% if page_obj.has_next %}
      <a href="?page={{ page_obj.next_page_number }}">‚Ä∫</a>
      <a href="?page={{ page_obj.paginator.num_pages }}">&raquo;</a>
    {% endif %}
  </nav>
{% endif %}
{% endblock %}